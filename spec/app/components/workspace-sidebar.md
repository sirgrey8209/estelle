# WorkspaceSidebar

> ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ì„ í‘œì‹œí•˜ëŠ” ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸

## ìœ„ì¹˜

`lib/ui/widgets/sidebar/workspace_sidebar.dart`

---

## ì—­í• 

- Pylonë³„ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ í‘œì‹œ
- ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í¼ì¹¨/ì ‘í˜
- ëŒ€í™”/íƒœìŠ¤í¬ ëª©ë¡ í‘œì‹œ
- ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì¶”ê°€ ë²„íŠ¼

---

## êµ¬ì„± ìš”ì†Œ

```
WorkspaceSidebar
â”œâ”€â”€ _EmptyState              # ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—†ì„ ë•Œ
â”œâ”€â”€ _PylonWorkspaceGroup     # Pylonë³„ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê·¸ë£¹
â”‚   â””â”€â”€ WorkspaceItem        # ê°œë³„ ì›Œí¬ìŠ¤í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ _WorkspaceHeader # ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í—¤ë”
â”‚       â”œâ”€â”€ _ConversationItem # ëŒ€í™” í•­ëª©
â”‚       â””â”€â”€ _TaskItem        # íƒœìŠ¤í¬ í•­ëª©
â””â”€â”€ _AddWorkspaceButton      # ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì¶”ê°€
```

---

## UI ìŠ¤í™

### ì „ì²´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚
â”‚  ğŸŒ™ ì›Œí¬ìŠ¤í˜ì´ìŠ¤1   â”‚  â† WorkspaceHeader (í¼ì¹¨/ì ‘í˜)
â”‚    ğŸ’¬ ëŒ€í™”1        â”‚  â† ConversationItem
â”‚    ğŸ’¬ ëŒ€í™”2        â”‚
â”‚    ğŸ“‹ íƒœìŠ¤í¬1      â”‚  â† TaskItem
â”‚                    â”‚
â”‚  â­ ì›Œí¬ìŠ¤í˜ì´ìŠ¤2   â”‚
â”‚    ğŸ’¬ ëŒ€í™”3        â”‚
â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  + ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì¶”ê°€ â”‚  â† AddWorkspaceButton
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìƒ‰ìƒ

| ìš”ì†Œ | ìƒ‰ìƒ |
|------|------|
| ë°°ê²½ | `AppColors.sidebarBg` |
| ì„ íƒëœ í•­ëª© | `AppColors.sidebarSelected` |
| ì„ íƒ í‘œì‹œ (ì™¼ìª½ í…Œë‘ë¦¬) | `AppColors.accent` (3px) |
| êµ¬ë¶„ì„  | `AppColors.divider` |
| í…ìŠ¤íŠ¸ (ê¸°ë³¸) | `AppColors.textSecondary` |
| í…ìŠ¤íŠ¸ (ì„ íƒë¨) | `AppColors.textPrimary` |
| í…ìŠ¤íŠ¸ (ë¹„í™œì„±) | `AppColors.textMuted` |

---

## WorkspaceItem

### ìƒíƒœ

| ìƒíƒœ | íƒ€ì… | ì´ˆê¸°ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `_isExpanded` | `bool` | `true` | í¼ì¹¨ ìƒíƒœ |
| `_editMode` | `_EditMode` | `none` | í¸ì§‘ ëª¨ë“œ (none/rename/delete) |

### ë™ì‘

#### 1. í¼ì¹¨/ì ‘í˜

**íŠ¸ë¦¬ê±°**: ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í—¤ë” íƒ­

**ê²°ê³¼**: ëŒ€í™”/íƒœìŠ¤í¬ ëª©ë¡ í‘œì‹œ/ìˆ¨ê¹€

#### 2. ë¡±í”„ë ˆìŠ¤ â†’ í¸ì§‘ ëª¨ë“œ

**íŠ¸ë¦¬ê±°**: í—¤ë” 0.4ì´ˆ ë¡±í”„ë ˆìŠ¤

**ê³¼ì •**:
1. ë¡±í”„ë ˆìŠ¤ ì‹œì‘ â†’ CircularProgressIndicator í‘œì‹œ
2. 0.4ì´ˆ ì™„ë£Œ â†’ í¸ì§‘ ë²„íŠ¼ í‘œì‹œ (ì´ë¦„ë³€ê²½, ì‚­ì œ)

**ê²°ê³¼**:
- `activeActionItemProvider`ì— í˜„ì¬ í•­ëª© ID ì„¤ì •
- í¸ì§‘ ë²„íŠ¼(ì´ë¦„ë³€ê²½, ì‚­ì œ) í‘œì‹œ

#### 3. ì´ë¦„ ë³€ê²½

**íŠ¸ë¦¬ê±°**: í¸ì§‘ ì•„ì´ì½˜ íƒ­

**ê³¼ì •**:
1. `_editMode = rename`
2. TextField í‘œì‹œ (ê¸°ì¡´ ì´ë¦„)
3. í™•ì¸ â†’ `renameWorkspace()` í˜¸ì¶œ
4. ì·¨ì†Œ â†’ `_editMode = none`

#### 4. ì‚­ì œ

**íŠ¸ë¦¬ê±°**: ì‚­ì œ ì•„ì´ì½˜ íƒ­

**ê³¼ì •**:
1. `_editMode = delete`
2. ì‚­ì œ í™•ì¸ í–‰ í‘œì‹œ ("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")
3. í™•ì¸ â†’ `deleteWorkspace()` í˜¸ì¶œ
4. ì·¨ì†Œ â†’ `_editMode = none`

#### 5. ëŒ€í™” ì¶”ê°€

**íŠ¸ë¦¬ê±°**: + ë²„íŠ¼ íƒ­

**ê³¼ì •**:
1. `_NewConversationDialog` í‘œì‹œ
2. ìŠ¤í‚¬ íƒ€ì… ì„ íƒ (general/planner/worker)
3. ëŒ€í™”ëª… ì…ë ¥ (ê¸°ë³¸ê°’ ìë™ ìƒì„±)
4. ìƒì„± â†’ `createConversation()` í˜¸ì¶œ

---

## ConversationItem

### Props

| ì´ë¦„ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `conversation` | `ConversationInfo` | ëŒ€í™” ì •ë³´ |
| `workspaceId` | `String` | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ID |
| `deviceId` | `int` | Pylon Device ID |
| `isSelected` | `bool` | ì„ íƒ ì—¬ë¶€ |

### ìŠ¤í‚¬ íƒ€ì… ì•„ì´ì½˜

| ìŠ¤í‚¬ | ì•„ì´ì½˜ |
|------|--------|
| `general` | ğŸ’¬ |
| `planner` | ğŸ“‹ |
| `worker` | ğŸ”§ |

### ìƒíƒœ í‘œì‹œ (StatusDot)

| ìƒíƒœ | ìƒ‰ìƒ | ì• ë‹ˆë©”ì´ì…˜ |
|------|------|------------|
| `idle` | ì—†ìŒ | - |
| `working` | ë…¸ë€ìƒ‰ | ì ë©¸ |
| `permission` / `waiting` | ë¹¨ê°„ìƒ‰ | ì ë©¸ |
| `error` | ë¹¨ê°„ìƒ‰ | ì •ì  |
| `unread` / `done` | ì´ˆë¡ìƒ‰ | ì •ì  |

### ë™ì‘

- **íƒ­**: ëŒ€í™” ì„ íƒ
- **ë¡±í”„ë ˆìŠ¤**: í¸ì§‘ ëª¨ë“œ (ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì™€ ë™ì¼)

---

## TaskItem

### Props

| ì´ë¦„ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `task` | `TaskInfo` | íƒœìŠ¤í¬ ì •ë³´ |
| `workspaceId` | `String` | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ID |
| `deviceId` | `int` | Pylon Device ID |
| `isSelected` | `bool` | ì„ íƒ ì—¬ë¶€ |

### ìƒíƒœ í‘œì‹œ

| ìƒíƒœ | ìƒ‰ìƒ |
|------|------|
| `idle` | ì—†ìŒ |
| `running` | ë…¸ë€ìƒ‰ (working) |
| `done` | ì´ˆë¡ìƒ‰ |
| `failed` | ë¹¨ê°„ìƒ‰ |

---

## StatusDot

ìƒíƒœ í‘œì‹œ ì  (ì ë©¸ ì• ë‹ˆë©”ì´ì…˜ í¬í•¨)

### ì ë©¸ ì¡°ê±´

```dart
bool get _shouldBlink =>
    status == 'working' ||
    status == 'waiting' ||
    status == 'permission';
```

### ì• ë‹ˆë©”ì´ì…˜

- Duration: 1200ms
- Curve: easeInOut
- Opacity: 0.3 â†” 1.0

---

## NewConversationDialog

ìƒˆ ëŒ€í™” ìƒì„± ë‹¤ì´ì–¼ë¡œê·¸

### ìŠ¤í‚¬ íƒ€ì… ìˆœí™˜

íƒ­í•  ë•Œë§ˆë‹¤ ìˆœí™˜: `general` â†’ `planner` â†’ `worker` â†’ `general`

### ê¸°ë³¸ ì´ë¦„ ìƒì„±

```dart
// ì˜ˆ: "ëŒ€í™”1", "ëŒ€í™”2", "í”Œëœ1", "êµ¬í˜„1"
String _generateDefaultName() {
  final baseName = skillTypeì˜ í•œê¸€ëª…;
  int count = 1;
  while (ë™ì¼ ì´ë¦„ ì¡´ì¬) count++;
  return '$baseName$count';
}
```

---

## ê´€ë ¨ ë¬¸ì„œ

- [workspace-item.md](./workspace-item.md) - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì•„ì´í…œ ìƒì„¸
- [../layout/desktop.md](../layout/desktop.md) - ë°ìŠ¤í¬íƒ‘ ë ˆì´ì•„ì›ƒ
- [../../state/workspace-provider.md](../state/workspace-provider.md) - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒíƒœ
